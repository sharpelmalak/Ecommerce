<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" class="no-js">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" th:href="@{/img/icon.png}" />
    <title>Waxen</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- intl-tel-input CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.19/css/intlTelInput.css">

    <!-- ============================================= -->
    <link rel="stylesheet" th:href="@{/css/linearicons.css}">
    <link rel="stylesheet" th:href="@{/css/font-awesome.min.css}">
    <link rel="stylesheet" th:href="@{/css/themify-icons.css}">
    <link rel="stylesheet" th:href="@{/css/bootstrap.css}">
    <link rel="stylesheet" th:href="@{/css/owl.carousel.css}">
    <link rel="stylesheet" th:href="@{/css/nice-select.css}">
    <link rel="stylesheet" th:href="@{/css/nouislider.min.css}">
    <link rel="stylesheet" th:href="@{/css/ion.rangeSlider.css}">
    <link rel="stylesheet" th:href="@{/css/ion.rangeSlider.skinFlat.css}">
    <link rel="stylesheet" th:href="@{/css/magnific-popup.css}">
    <link rel="stylesheet" th:href="@{/css/main.css}">



	<style>
		.s_product_text {
			padding: 20px;
			/* Adjust padding as needed */
		}

		.s_product_text h3 {
			font-size: 24px;
			/* Main product name size */
			margin-bottom: 10px;
		}

		.s_product_text h2 {
			font-size: 22px;
			/* Price size */
			color: #ff5722;
			/* Price color */
			margin-bottom: 15px;
		}

		.list {
			list-style-type: none;
			/* Remove bullet points */
			padding: 0;
			/* Remove default padding */
		}

		.list li {
			margin-bottom: 10px;
			/* Space between list items */
		}

		.list li a {
			text-decoration: none;
			/* Remove underline from links */
			color: #333;
			/* Link color */
		}

		.list li a span {
			font-weight: bold;
			/* Make labels bold */
		}

		.product-description {
			margin: 15px 0;
			/* Space above and below the description */
			font-size: 16px;
			/* Description font size */
			color: #666;
			/* Description color */
		}

		.product_count {
			margin-top: 15px;
			/* Space above the quantity section */
		}

		.product_count label {
			margin-right: 10px;
			/* Space between label and input */
		}

		.product_count input {
			width: 60px;
			/* Fixed width for quantity input */
			text-align: center;
			/* Center text in input */
		}

		.card_area {
			margin-top: 20px;
			/* Space above the button area */
		}

		.add-to-cart {
			padding: 10px 20px;
			/* Padding for button */
			background-color: #ff5722;
			/* Button background color */
			color: #fff;
			/* Button text color */
			text-decoration: none;
			/* Remove underline from link */
		}


		.s_Product_carousel img {
			max-width: 60%;
			/* Prevents the image from overflowing its container */
			height: auto;
			/* Maintains aspect ratio */
		}

		.navbar-brand img {
            max-width: 60%;
            /* Prevents the image from overflowing its container */
            height: auto;
        }

        .navbar-brand {
            max-width: 30%;
            /* Prevents the image from overflowing its container */
            height: auto;
        }

        /* Style for suggestions dropdown */
        #suggestions {
            display: none;
            /* Initially hidden */
            position: absolute;
            top: 100%;
            /* Aligns directly below the input box */
            left: 0;
            width: 100%;
            /* Matches input width */
            background-color: #fff;
            border: 1px solid #ddd;
            border-top: none;
            /* Avoid double border with input */
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            list-style: none;
            padding: 0;
            margin: 0;
            z-index: 1000;
            max-height: 200px;
            /* Limits height */
            overflow-y: auto;
            /* Adds scroll if suggestions exceed max height */
        }

        #suggestions li {
            padding: 10px;
            cursor: pointer;
            border-bottom: 1px solid #eee;
        }

        #suggestions li:last-child {
            border-bottom: none;
            /* Removes border from last item */
        }

        #suggestions li:hover {
            background-color: #f5f5f5;
        }

		.waxen4{
			padding-top: 250px;
		}

        .single-footer-widget p {
                    text-align: justify;
                }

	</style>
	<!-- jQuery CDN -->
	<script src="https://code.jquery.com/jquery-3.7.1.min.js"
		integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>



</head>



<body>
	  <!-- Start Header Area -->
	  <header class="header_area sticky-header">
        <div class="main_menu">
            <nav class="navbar navbar-expand-lg navbar-light main_box">
                <div class="container">
                    <!-- Brand and toggle get grouped for better mobile display -->
                    <a class="navbar-brand logo_h" href="/home"><img src="/img/waxen.jpg" alt=""></a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse"
                        data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                        aria-expanded="false" aria-label="Toggle navigation">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse offset" id="navbarSupportedContent">
                        <ul class="nav navbar-nav menu_nav ml-auto">
                            <li class="nav-item"><a class="nav-link" href="/home">Home</a></li>
                            <li class="nav-item"><a class="nav-link" href="/shop">Shop</a></li>
                            <li class="nav-item submenu dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button"
                                    aria-haspopup="true" aria-expanded="false">Account</a>
                                <ul class="dropdown-menu" id="dropdown-menu-auth"></ul>
                            </li>
                        </ul>
                        <ul class="nav navbar-nav navbar-right">
                            <li class="nav-item"><a href="/cart" class="cart"><span class="ti-shopping-cart"></span></a>
                            </li>
                            <li class="nav-item">
                                <button class="search"><span class="lnr lnr-magnifier" id="search"></span></button>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
        </div>
        <div class="search_input" id="search_input_box">
            <div class="container">
                <form class="d-flex justify-content-between" onsubmit="">
                    <input type="text" class="form-control" id="search_input" placeholder="Search Here"
                        oninput="showSuggestions(this.value)">
                    <button type="submit" class="btn"></button>
                    <span class="lnr lnr-cross" id="close_search" title="Close Search"></span>
                </form>
                <!-- Suggestions List -->
                <ul id="suggestions"></ul>
            </div>

        </div>
    </header>
    <!-- End Header Area -->
	<!-- --================Single Product Area =================-->
      <div id="action-message" class="action-message" style="display: none;"></div>
	<div class="product_image_area waxen4" >
		<div class="container">
			<div class="row s_product_inner">
				<div class="col-lg-6">
						<div class="single-prd-item">
							<img class="img-fluid" th:src="@{${productDTO.image}}" alt="not found">
						</div>
				</div>
				<div class="col-lg-5 offset-lg-1" style="margin-top: -60px;">
					<div class="s_product_text">
						<h3 th:text="${productDTO.name}">Product Name</h3>
						<h2 th:text="${productDTO.price}">Product Price</h2>

						<ul class="list">
							<li>
								<a class="active" href="#">
									<span>Category</span> :
									<span th:text="${category}">Category</span>
								</a>
							</li>
							<li>
								<a href="#">
									<span>Brand</span> :
									<span th:text="${productDTO.brand}">Brand</span>
								</a>
							</li>
							<li>
								<a href="#">
									<span>Material</span> :
									<span th:text="${productDTO.material}">Material</span>
								</a>
							</li>
							<li>
								<a href="#">
									<span>Diameter</span> :
									<span th:text="${productDTO.caseDiameter}">Case</span>
								</a>
							</li>
							<li>
								<a href="#">
									<span>Water</span> :
									<span th:text="${productDTO.waterResistance}">Water</span>
								</a>
							</li>
							<li>
								<a href="#">
									<span>Gender</span> :
									<span th:text="${productDTO.gender}">Gender</span>
								</a>
							</li>
						</ul>

						<p class="product-description" th:text="${productDTO.description}">Product Description</p>

						<div class="product_count">
							<label for="sst">Quantity:</label>
							<input type="number" name="qty" id="sst" value="1" title="Quantity:" class="input-text qty"
								min="1" disabled>
							<button onclick="increaseQuantity()" class="increase items-count" type="button">
								<i class="lnr lnr-chevron-up"></i>
							</button>
							<button onclick="decreaseQuantity()" class="reduced items-count" type="button">
								<i class="lnr lnr-chevron-down"></i>
							</button>
						</div>

						<input id="max-quantity" hidden="hidden" th:value="${productDTO.quantity}">
						<div class="card_area d-flex align-items-center" >
							<a href="#" class="primary-btn" th:data-product-id="${productDTO.id}" role="button">
								Add to Cart
							</a>

						</div>
					</div>
				</div>
			</div>
		</div>
		<!--================End Single Product Area =================-->
	</div>


		
    <!-- start footer Area -->
    <footer class="footer-area section_gap">
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-md-6 col-sm-6">
					<div class="single-footer-widget" style="text-align: justify;">
						<h6>About Us</h6>
						<p>
							Welcome to Waxen, where luxury and style meet in every timepiece. We offer a curated selection of world-renowned brands like G-Shock, CASIO, Fossil, ALBA, CITIZEN, TOMMY HILFIGER, NAVIFORCE, and TIMEX.
							From SPORTY watches for adventurers to CLASSIC and CASUAL designs for everyday elegance, our diverse collections suit every style. Discover SMART technology, PREMIUM craftsmanship, and timeless Analog watches, each embodying quality and individuality.	
							At Waxen, we’re passionate about excellence—explore our collections and find a watch that’s uniquely yours.
						</p>
					</div>
				</div>
                <div class="col-lg-4  col-md-6 col-sm-6">
                    <div class="single-footer-widget">
                        <h6>Newsletter</h6>
                        <p>Stay update with our latest</p>
                        <div class="" id="mc_embed_signup">

                            <form target="_blank" novalidate="true"
                                action="https://spondonit.us12.list-manage.com/subscribe/post?u=1462626880ade1ac87bd9c93a&amp;id=92a4423d01"
                                method="get" class="form-inline">

                                <div class="d-flex flex-row">

                                    <input class="form-control" name="EMAIL" placeholder="Enter Email"
                                        onfocus="this.placeholder = ''" onblur="this.placeholder = 'Enter Email '"
                                        required="" type="email">


                                    <button class="click-btn btn btn-default"><i class="fa fa-long-arrow-right"
                                            aria-hidden="true"></i></button>
                                    <div style="position: absolute; left: -5000px;">
                                        <input name="b_36c4fd991d266f23781ded980_aefe40901a" tabindex="-1" value=""
                                            type="text">
                                    </div>

                                    <!-- <div class="col-lg-4 col-md-4">
												<button class="bb-btn btn"><span class="lnr lnr-arrow-right"></span></button>
											</div>  -->
                                </div>
                                <div class="info"></div>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3  col-md-6 col-sm-6">
                    <div class="single-footer-widget mail-chimp">
                        <h6 class="mb-20">Instragram Feed</h6>
                        <ul class="instafeed d-flex flex-wrap">
                            <li><img src="img/i1.jpg" alt=""></li>
                            <li><img src="img/i2.jpg" alt=""></li>
                            <li><img src="img/i3.jpg" alt=""></li>
                            <li><img src="img/i4.jpg" alt=""></li>
                            <li><img src="img/i5.jpg" alt=""></li>
                            <li><img src="img/i6.jpg" alt=""></li>
                            <li><img src="img/i7.jpg" alt=""></li>
                            <li><img src="img/i8.jpg" alt=""></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-2 col-md-6 col-sm-6">
                    <div class="single-footer-widget">
                        <h6>Follow Us</h6>
                        <p>Let us be social</p>
                        <div class="footer-social d-flex align-items-center">
                            <a href="#"><i class="fa fa-facebook"></i></a>
                            <a href="#"><i class="fa fa-twitter"></i></a>
                            <a href="#"><i class="fa fa-dribbble"></i></a>
                            <a href="#"><i class="fa fa-behance"></i></a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="footer-bottom d-flex justify-content-center align-items-center flex-wrap">
                <p class="footer-text m-0">
                    <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                    Copyright &copy;
                    <script>document.write(new Date().getFullYear());</script> All rights reserved | This template is
                    made with <i class="fa fa-heart-o" aria-hidden="true"></i> by <a href="https://colorlib.com"
                        target="_blank">Colorlib</a>
                    <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                </p>
            </div>
        </div>
    </footer>
    <!-- End footer Area -->



    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.19/js/intlTelInput.min.js"></script>




    <script th:src="@{/js/vendor/jquery-2.2.4.min.js}"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"
        integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4"
        crossorigin="anonymous"></script>

    <!-- End footer Area -->
    <script th:src="@{/js/vendor/bootstrap.min.js}"></script>
    <script th:src="@{/js/jquery.ajaxchimp.min.js}"></script>
    <script th:src="@{/js/jquery.nice-select.min.js}"></script>
    <script th:src="@{/js/jquery.sticky.js}"></script>
    <script th:src="@{/js/nouislider.min.js}"></script>
    <script th:src="@{/js/jquery.magnific-popup.min.js}"></script>
    <script th:src="@{/js/owl.carousel.min.js}"></script>
    <script th:src="@{/js/main.js}"></script>




		<script>
			function increaseQuantity() {
				var result = document.getElementById('sst');
				var max_input = document.getElementById("max-quantity")
				var qty = parseInt(result.value);
				var max = parseInt(max_input.value);
				if (!isNaN(qty) && qty<max) {
					result.value = qty + 1;
				}
			}

			function decreaseQuantity() {
				var result = document.getElementById('sst');
				var qty = parseInt(result.value);
				if (!isNaN(qty) && qty > 1) {
					result.value = qty - 1;
				}
			}


			$(document).ready(function () {

				// Attach event listener for all elements with the class 'add-to-cart'
				$(document).on('click', '.primary-btn', function (e) {
					e.preventDefault(); // Prevent default link behavior

					// Log a message to verify the event is triggered
					console.log("hello, from sharbel!");

					// Get the product ID from the data attribute
					const productId = $(this).data('product-id');
					console.log(productId)

					// Get the quantity value from the input with id 'sst'
					const quantity = $('#sst').val() || 1; // Default quantity to 1 if 'sst' is not found

					// AJAX GET request to add the product to the cart
					$.ajax({
						url: '/cart/add', // The endpoint for adding to the cart
						type: 'GET',
						data: {
							productId: productId,
							quantity: quantity
						},
						success: function (response) {
							// Success: handle the response (e.g., update cart UI, show notification)
                            showActionMessage('Product added to cart successfully!','success')
							console.log("Product added with ID: " + productId + " and quantity: " + quantity);
						},
						error: function (xhr, status, error) {
							// Error: handle the error (e.g., show error message)
							console.log("Error Status: " + status);
							console.log("Error Message: " + error);
                            showActionMessage('Failed to add product to cart. Please try again.','error');
						}
					});
				});

			});



			$(document).ready(function () {
            checkAuthStatus();
            $('#search_input').on('keypress', function (e) {
                if (e.key === 'Enter') {
                    e.preventDefault(); // Prevents the form submission if search is inside a form
                    selectSuggestion($('#search_input').val())
                }
            });
        });

        function checkAuthStatus() {
            $.ajax({
                url: '/auth/status',
                type: 'GET',
                success: function (response) {
                    if (response.authenticated) {
                        // User is authenticated
                        $('#dropdown-menu-auth').html(`
                        <li class="nav-item"><a class="nav-link" href="/user/account">My-Account</a></li>
                        <li class="nav-item"><a class="nav-link" href="/logout">Logout</a></li>
                    `);
                    } else {
                        // User is not authenticated
                        $('#dropdown-menu-auth').html(`
                        <li class="nav-item"><a class="nav-link" href="/auth/login">Login</a></li>
                        <li class="nav-item"><a class="nav-link" href="/auth/registeration">Register</a></li>
                    `);
                    }
                },
                error: function (error) {
                    console.error('Error checking authentication status:', error);
                }
            });
        }


        // Function to fetch and display suggestions as user types
        function showSuggestions(query) {
            const suggestionList = $('#suggestions').empty();
            if (query.length < 2) {
                $('#suggestions').hide();
                return;
            }

            $.ajax({
                url: '/products/search',  // Endpoint for suggestions
                type: 'GET',
                data: { name: query },
                success: function (suggestions) {
                    console.log(suggestions)
                    if (suggestions.length === 0) {
                        suggestionList.hide();
                        return;
                    }
                    suggestions.forEach(suggestion => {
                        suggestionList.append(`<li onclick="selectSuggestion('${suggestion.name}')">${suggestion.name}</li>`);
                    });
                    suggestionList.show();
                }
            });
        }


        // Function to set suggestion in search input
        function selectSuggestion(suggestion) {
            console.log(suggestion)
            $('#search_input').val(suggestion);
            $('#suggestions').hide();
            window.location.href = '/shop?param=' + suggestion
            // performSearch()
        }


		</script>

</body>

</html>